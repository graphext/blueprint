---
kind: pipeline
name: blueprint
trigger:
  branch:
  - deploy
steps:
- name: build
  image: node:dubnium
  commands:
  - echo -n $NPMRC | base64 -d > /root/.npmrc
  - yarn
  - yarn compile
  - yarn dist:libs
  - rm /root/.npmrc
  environment:
    NPMRC:
     from_secret: NPMRC
- name: publish
  image: node:dubnium
  commands:
  - echo -n $NPMRC | base64 -d > /root/.npmrc
  - npm publish packages/core
  - npm publish packages/icons
  - npm publish packages/datetime
  - npm publish packages/table
  - npm publish packages/select
  - rm /root/.npmrc
  environment:
    NPMRC:
     from_secret: NPMRC
- name: docs
  image: node:dubnium
  depends_on:
  - build
  commands:
  - yarn dist:apps
  - yarn site:clean
  - yarn copy:docs-app
  - yarn deploy

---
kind: signature
hmac: 274084619cbf1b68799a19a772df79de8e74c263ecb693e7d88167a184aff07e

...
