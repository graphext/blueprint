---
kind: pipeline
name: blueprint
trigger:
  branch:
  - deploy
steps:
- name: build
  image: node:dubnium
  commands:
  - echo -n $NPMRC | base64 -d > /root/.npmrc
  - yarn
  - yarn compile
  - yarn dist:libs
  - rm /root/.npmrc
  environment:
    NPMRC:
     from_secret: NPMRC
- name: publish
  image: node:dubnium
  depends_on:
  - build
  commands:
  - echo -n $NPMRC | base64 -d > /root/.npmrc
  - npm publish packages/core
  - npm publish packages/icons
  - npm publish packages/datetime
  - npm publish packages/table
  - npm publish packages/select
  - rm /root/.npmrc
  environment:
    NPMRC:
     from_secret: NPMRC
- name: docs
  image: node:dubnium
  depends_on:
  - build
  commands:
  - yarn dist:apps
  - yarn site:clean
  - yarn copy:docs-app
  - git config user.email "drone@graphext.com"
  - git config user.name "drone"
  - yarn deploy

---
kind: signature
hmac: ff3fbc3be0f5f51ee99dace9e6f9a88a93713b60554e880b6da9ad55074b1533

...
